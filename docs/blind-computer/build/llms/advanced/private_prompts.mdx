import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Private Prompts

Private prompts allow you to store sensitive system prompts in nilDB (Nillion's decentralized database) and use them with LLM inference without exposing the prompt content. This is useful for protecting proprietary instructions, custom behaviors, or sensitive context.

## Overview

The private prompts flow involves:

1. **Storing prompts in nilDB**: Upload your prompt to nilDB and receive document IDs
2. **Setting up delegation**: Create a delegation token chain between the subscription owner and prompt data owner
3. **Using stored prompts**: Make LLM requests that reference the stored prompt without exposing its content

## Storing Prompts to nilDB

First, store your private prompt to nilDB. This returns document IDs and owner information.

<Tabs>
    <TabItem value="python" label="Python">
        ```python reference showGithubLink
        https://github.com/NillionNetwork/nilai-py/blob/main/examples/5-nildb-prompt-storage.py
        ```
    </TabItem>
    <TabItem value="typescript" label="TypeScript" default>
        <p><strong>Note:</strong> The TypeScript example combines storing and using prompts in a single file. See the <strong>store_to_nildb()</strong> section:</p>
        ```typescript reference showGithubLink
        https://github.com/NillionNetwork/nilai-ts/blob/main/examples/2-nildb-prompt-store-retrieve.ts#L1-L31
        ```
    </TabItem>
</Tabs>

## Using Stored Prompts with Delegation

To use stored prompts, you need to set up a delegation token flow. This involves:

1. A **subscription owner server** that manages API access
2. A **prompt data owner server** that manages access to stored prompt documents
3. A **client** that makes requests using delegation tokens

<Tabs>
    <TabItem value="python" label="Python">
        ```python reference showGithubLink
        https://github.com/NillionNetwork/nilai-py/blob/main/examples/6-nildb-stored-prompt.py
        ```
    </TabItem>
    <TabItem value="typescript" label="TypeScript" default>
        <p><strong>Note:</strong> The TypeScript example combines storing and using prompts in a single file. See the <strong>post store_to_nildb()</strong> section:</p>
        ```typescript reference showGithubLink
        https://github.com/NillionNetwork/nilai-ts/blob/main/examples/2-nildb-prompt-store-retrieve.ts
        ```
    </TabItem>
</Tabs>

## Important Notes

- **Store private keys securely**: Keep private keys and stored prompt data in secure configuration files
- **Token expiration**: Set appropriate expiration times and usage limits for delegation tokens
- **Prompt storage only on NUCs**: Prompt delegation is only available for NUC authentication.

## Use Cases

Private prompts are ideal for:

- **Proprietary AI assistants**: Protect your custom system prompts and business logic
- **Sensitive instructions**: Keep confidential context or data handling rules private
- **Multi-tenant applications**: Different users can have different private prompts without exposing them
- **Compliance requirements**: Ensure sensitive prompts never leave the secure environment
