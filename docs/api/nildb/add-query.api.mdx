---
id: add-query
title: 'Add query'
description: 'Add a new query'
sidebar_label: 'Add'
hide_title: true
hide_table_of_contents: true
api: eJy9VttuGzcQ/RWCL7WBleSrkuybE7uAWzRxY9l9cIyCWo4k2lxyS3JtC8L+e2fI1V21E6CtH2QuOTOcy5kznHEJvnCqCsoanvMzKZlgBp7ZXzW4Kc+4h6J2Kkx5fjfjD88B/9839xkPYuxxzX+PcrjhAFV8+Gglys7ip3IgeR5cDRkvrAlgAh2JqtKqEHRl78HTvTPuiwmUglZhWgF6YocPUASerRi6438qiTtGlECeJZWMPwmnxFCDx3WlKtDKAHlUOVuBCwoP0C7p4r+NeFlt1BM4L7Se0hpjYEqio2qkwLGRdSxMcCtA2UXzrXM+OGXG+I3npcCgeF1H14IKmgRubi7PedO6ugyq1WuylXj/X4eWudqRaiGlIj+EvlpLnTXwZRQB8Fpx4lm2Fs9WEZL+Zj4yDqYuycZiA7+H4HAxtFaDMGRYBCxrs37Ddm6bZdARm7dtxBj9D/ufccqz//E4hHNi+h3Ozi94A/fx7L9IZrOVrjPyfJmzexJYNNXyshTgK+7vxhJxQZP+KEJfWeNTMEcHh9vd8BW8rV0BrHCADktK2MnBwbbgrdBKRkZh2CCYpgK8x+AZOGcdEcO/wj+BLLUmt8vhdxVj0ZCU8U5Q5SbGcj7Afo5Gf/KMBHwQZdWlWNurdrCEVj4wO0p6DHW8GEcC/Kf6CDNd7+EFBLdDXo+rsHI3h7W37upBws0Ksi7IS56qfrKr0L+pVC6MRZknKib75Y8BXXK6q9yXWEuH0GIeHJJlykJs/RLCxGKteGV9DEWECX71RKV6T4c9mmoq5ilp+piR2mmUmYRQ+bzXM0rLYUdCabu41Hhj10B4tu6R0+CbD8RrQkzKUByLiySQnfl4ou8hCJe6Ly5+ngOCAtyEwhk7vzzv4AmrYz6I6i+uj077vzKhxxbvnZRxBogaj3AoFNQWDIysrDLBd78ZUq7EVFshWVkjSpQpdC0h/2Y6TImQs0vva1QSYYk2OoOXKmcXL5VyqZEWh2zPQWHLEm8BuU+iopY5Gwg3hsAMwoNJKNAbh4XzaHllXu1hPFEFC5yzT1rhCcL8LflYS+rNr8tXxcUL+qJhMcv58Ui8Px31Tzqn7w7fdU5O+0ed4fGo6BwVH/rHo35fjER//lxY6ch5q3+v/urIXCPDu1lDDK/MyMbyt2BH0Jx/ZGdXl6SLEEuVPeiedA+26n2rvArsTtrCL8CGqb7fm4Nx82SfCSPZ3RiBUA9po/c5HX5OEE3oXeq/IbjPgmU4EpxhpXXQpcxnsXdKEXmxTR69C+cvwo2JtiDWHY/HtiMCvIRepYWK1mO3zdrOxFFZKUrUIf7MuxO7bELti6ez2VB4uHG6aWg7GcYn6LIs8UGKCiAkdhm18yOgCP+U/OoM0lhHUqkjMW6SPxFg0jgrCqjCq7L3Kwxz9eV6EGdqevCWkSa5E880NPA357iwMU+RJeLejGthxnWkTZ5sEtSpnVcoZIMyVmkbeXzFQ0xPlBjYRzCYoqwNJdB3nN7N3zjfErA=
sidebar_class_name: 'post api-method'
info_path: api/nildb/nildb-api
custom_edit_url: null
---

import MethodEndpoint from '@theme/ApiExplorer/MethodEndpoint';
import ParamsDetails from '@theme/ParamsDetails';
import RequestSchema from '@theme/RequestSchema';
import StatusCodes from '@theme/StatusCodes';
import OperationTabs from '@theme/OperationTabs';
import TabItem from '@theme/TabItem';
import Heading from '@theme/Heading';

<Heading
  as={'h1'}
  className={'openapi__heading'}
  children={'Add query'}
></Heading>

<MethodEndpoint
  method={'post'}
  path={'/api/v1/queries'}
  context={'endpoint'}
></MethodEndpoint>

:::info
You may use this test Bearer token we have created for development

```
eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NksifQ.eyJpc3MiOiJkaWQ6bmlsOnRlc3RuZXQ6bmlsbGlvbjF4dnRuM2FhajQ4dGY3bm5zZW16MGQ2OGVwbjZlcHU0ZjRhNG5mYSIsImF1ZCI6ImRpZDpuaWw6dGVzdG5ldDpuaWxsaW9uMXd3c3Jqbmd4dnU5dGMzMzVsajlrM213d3JybDV3M3EyZDB1ZXR6In0.yOKg-wyJdyn9jK-KNtkjbi9PS0pF9wmgVmd7pIeNGhoTjhgZhzB62atbgzE45OGGYx0gUsw_i2k3K2AdFf_tuQ
```

:::

Add a new query

<Heading
  id={'request'}
  as={'h2'}
  className={'openapi-tabs__heading'}
  children={'Request'}
></Heading>

<ParamsDetails parameters={undefined}></ParamsDetails>

<RequestSchema
  title={'Body'}
  body={{
    required: true,
    content: {
      'application/json': {
        schema: {
          type: 'object',
          required: ['_id', 'name', 'schema', 'variables', 'pipeline'],
          properties: {
            _id: {
              description: 'A universally unique identifier for the item.',
              type: 'string',
              format: 'uuid',
              title: 'UUID',
            },
            name: { type: 'string' },
            schema: {
              description: 'A universally unique identifier for the item.',
              type: 'string',
              format: 'uuid',
              title: 'UUID',
            },
            variables: {
              type: 'object',
              additionalProperties: {
                oneOf: [
                  {
                    type: 'object',
                    required: ['type', 'description'],
                    properties: {
                      type: {
                        type: 'string',
                        enum: ['string', 'number', 'boolean', 'date'],
                      },
                      description: { type: 'string' },
                    },
                    title: 'QueryVariable',
                  },
                  {
                    type: 'object',
                    required: ['type', 'description', 'items'],
                    properties: {
                      type: { type: 'string', enum: ['array'] },
                      description: { type: 'string' },
                      items: {
                        type: 'object',
                        required: ['type'],
                        properties: {
                          type: {
                            type: 'string',
                            enum: ['string', 'number', 'boolean', 'date'],
                          },
                        },
                      },
                    },
                    title: 'QueryArrayVariable',
                  },
                ],
              },
            },
            pipeline: {
              type: 'array',
              items: { type: 'object', additionalProperties: true },
            },
          },
        },
      },
    },
  }}
></RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{
    '201': { description: 'Resource created' },
    '400': {
      description: 'Validation or processing errors',
      content: {
        'application/json': {
          schema: {
            type: 'object',
            required: ['ts', 'errors'],
            properties: {
              ts: {
                type: 'string',
                format: 'date-time',
                description: "The error's timestamp.",
              },
              errors: {
                description: 'A list of error messages',
                type: 'array',
                items: {
                  anyOf: [
                    { type: 'string' },
                    {
                      type: 'object',
                      properties: {
                        code: { type: 'string' },
                        message: { type: 'string' },
                      },
                    },
                  ],
                },
              },
            },
            title: 'Error',
          },
        },
      },
    },
    '401': { description: 'Missing or invalid JWT' },
    '500': { description: 'Internal server error' },
  }}
></StatusCodes>
