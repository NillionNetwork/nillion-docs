---
id: add-a-new-query
title: 'Add a new query'
description: 'Add a new query'
sidebar_label: 'Add a new query'
hide_title: true
hide_table_of_contents: true
api: eJy9Vtty4zYM/RUOX5rM+JKrt9VbdpPOpJfdtHHSB2+mA4uQzaxEakkqicejfy9AyZdY7m47s7N+sCiCAIGDA0BL6TGtnA4LmUyW8vE50POhfujJADNPa/lHhW4hacPh5wp9eGsVnV3GV+1QySS4CnsytSagCSyCssx1CkFbM3z01vCeT+dYAK/CokSZSDt9xDTI3pahifxbK9oxUCA9WpWefAKnYZqjp3WpS8y1QfaodLZEFzQJyC7r0kOhT50u+XK65UJURj+h85DnC15TDEIrclRnGp3IrBNhTlsBiwGZb53zwWkzo3eSF0BByaqKrgUdcj5wd3d9KevW1U1QrV7d24r3+zq0wWoP1KCUZj8gv3kF3ZdSEmW9V1F0oG/0d1HoSTRVwTbWG/Q+RUeLqbU5gmHDECiZ9esbuojWm1AjI+/bOKNkTYqNHjgHCzLPOP4PLJjLdfNjGHxpjW9iPDk66mYzuiJShxSEEr5KU/Q+qyi18htVBMEDXcDj7nfmVgvK2T4c7iHXKoYn6A7ylXEgowKds85/KzACW2pNdkno91FwHRPzrB90sUvmRI4JEhYIm0V44gUC0tQ6xTEEG7eNVTjgEmsd6IDwm/aBbTT6BSEAs9iz/o2SYBYfsth3d9tHF4bXsabky9620966r4Dqh3q7iq7YS7nK6XE3nN91k0KKRZsnTrD45a9xrLcd2iklQBh8Fp/jrGAvwtxSxmRpfXQewpzehlDq4dPxkI/piIxHx3yNGFQupzPzEEqfDIdG52raV1jYAS1zumlgMDxb90nydFpNrVvmTYNJnF3rsNnOaobw+xTBNZ0nLn5e0YJD6gQkLq8v+yQRVUSAs391e3I++lVAPrN077yIxQQViai60lj+aFRptQl+8NGwcgmL3IISRUW80CbNK4XJR9MXGkIirr2vSAlC5J4PUJQsw5cyEVcvpXZNOa2F4sBhaouCbkF1yEehUokYg5thiOQUClPyxlGqPFneKvwDiieqUEoT8S7XJPnBf/V8zDVX6J+b0X/1Qr7kuB648jSDH8+z0Vn//M3xm/7Z+eikPz3N0v5J+tPoNBuNIIPRaqZv1eWq4P+r/vZce9XxJ8uap4c2mY3pb+lNpLl8Ky5urlmXKNZk9mhwNjjq5Pteex3ERNnUr8lGUD8crMi4KzkUYJSYzIgI1ZQ3hu8b4fuGog17N/pfOXjILYbGoTOisA4HjHwv1k4BsTu24HULbf/MDPgShmUOOtqJdbVsa3BC3VczJMf0t6pDqqc5FypJl8speLxzeV3zdnMPfRFuEhC/D0kBQVE9ceF+Qjoi3zUNvj9uvheoYVSx6e02e25ujcYFTcsyfPHsw1YvuflwO45fDs33ZxFboHTwzEOC/hNJCxuxiP0g7i1lDmZWxZYoG5tMai7cLcB2msN2S6YeveUhwRNPjO0nNARRrw0l8LuMHfYf69fifg==
sidebar_class_name: 'post api-method'
info_path: api/nildb/nildb-api
custom_edit_url: null
---

import MethodEndpoint from '@theme/ApiExplorer/MethodEndpoint';
import ParamsDetails from '@theme/ParamsDetails';
import RequestSchema from '@theme/RequestSchema';
import StatusCodes from '@theme/StatusCodes';
import OperationTabs from '@theme/OperationTabs';
import TabItem from '@theme/TabItem';
import Heading from '@theme/Heading';

<Heading
  as={'h1'}
  className={'openapi__heading'}
  children={'Add a new query'}
></Heading>

<MethodEndpoint
  method={'post'}
  path={'/api/v1/queries'}
  context={'endpoint'}
></MethodEndpoint>

:::info
You may use this test Bearer token we have created for development

```
eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NksifQ.eyJpc3MiOiJkaWQ6bmlsOnRlc3RuZXQ6bmlsbGlvbjF4dnRuM2FhajQ4dGY3bm5zZW16MGQ2OGVwbjZlcHU0ZjRhNG5mYSIsImF1ZCI6ImRpZDpuaWw6dGVzdG5ldDpuaWxsaW9uMXd3c3Jqbmd4dnU5dGMzMzVsajlrM213d3JybDV3M3EyZDB1ZXR6In0.yOKg-wyJdyn9jK-KNtkjbi9PS0pF9wmgVmd7pIeNGhoTjhgZhzB62atbgzE45OGGYx0gUsw_i2k3K2AdFf_tuQ
```

:::

Add a new query

<Heading
  id={'request'}
  as={'h2'}
  className={'openapi-tabs__heading'}
  children={'Request'}
></Heading>

<ParamsDetails parameters={undefined}></ParamsDetails>

<RequestSchema
  title={'Body'}
  body={{
    required: true,
    content: {
      'application/json': {
        schema: {
          type: 'object',
          required: ['_id', 'name', 'schema', 'variables', 'pipeline'],
          properties: {
            _id: {
              description: 'A universally unique identifier for the item.',
              type: 'string',
              format: 'uuid',
              title: 'UUID',
            },
            name: { type: 'string' },
            schema: {
              description: 'A universally unique identifier for the item.',
              type: 'string',
              format: 'uuid',
              title: 'UUID',
            },
            variables: {
              type: 'object',
              additionalProperties: {
                type: 'object',
                required: ['type', 'description'],
                properties: {
                  type: {
                    type: 'string',
                    enum: ['string', 'number', 'boolean', 'date'],
                  },
                  description: { type: 'string' },
                },
                title: 'QueryVariable',
              },
            },
            pipeline: {
              type: 'array',
              items: { type: 'object', additionalProperties: true },
            },
          },
        },
      },
    },
  }}
></RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{
    '200': {
      description: 'Query created successfully',
      content: {
        'application/json': {
          schema: {
            type: 'object',
            required: ['data'],
            properties: {
              data: {
                description: 'A universally unique identifier for the item.',
                type: 'string',
                format: 'uuid',
                title: 'UUID',
              },
            },
          },
        },
      },
    },
    '400': {
      description: 'Validation or processing errors',
      content: {
        'application/json': {
          schema: {
            type: 'object',
            required: ['ts', 'errors'],
            properties: {
              ts: {
                type: 'string',
                format: 'date-time',
                description: 'The time of the error according to the node.',
              },
              errors: {
                description: 'List of error messages',
                type: 'array',
                items: {
                  anyOf: [
                    { type: 'string' },
                    {
                      type: 'object',
                      properties: {
                        code: { type: 'string' },
                        message: { type: 'string' },
                      },
                    },
                  ],
                },
              },
            },
            title: 'Error',
          },
        },
      },
    },
    '401': { description: 'Missing or invalid JWT' },
  }}
></StatusCodes>
