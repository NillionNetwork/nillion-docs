---
id: chat-completion-v-1-chat-completions-post
title: "Chat Completion"
description: "Generate a chat completion response from the AI model."
sidebar_label: "Chat Completion"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/nilai/nilai
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Chat Completion"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/v1/chat/completions"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Generate a chat completion response from the AI model.

- **req**: Chat completion request containing messages and model specifications
- **user**: Authenticated user information (through HTTP Bearer header)
- **Returns**: Full chat response with model output, usage statistics, and cryptographic signature

### Request Requirements
- Must include non-empty list of messages
- Must specify a model
- Supports multiple message formats (system, user, assistant)

### Response Components
- Model-generated text completion
- Token usage metrics
- Cryptographically signed response for verification

### Processing Steps
1. Validate input request parameters
2. Prepare messages for model processing
3. Generate AI model response
4. Track and update token usage
5. Cryptographically sign the response

### Potential HTTP Errors
- **400 Bad Request**:
  - Missing messages list
  - No model specified
- **500 Internal Server Error**:
  - Model fails to generate a response

### Example
```python
# Generate a chat completion
request = ChatRequest(
    model="meta-llama/Llama-3.2-1B-Instruct",
    messages=[
        \{"role": "system", "content": "You are a helpful assistant"\},
        \{"role": "user", "content": "Hello, who are you?"\}
    ]
)
response = await chat_completion(request, user)

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"default":{"model":"meta-llama/Llama-3.2-1B-Instruct","messages":[{"content":"You are a helpful assistant.","role":"system"},{"content":"What is your name?","role":"user"}],"temperature":0.2,"top_p":0.95,"max_tokens":2048,"stream":false,"nilrag":{}},"properties":{"model":{"type":"string","title":"Model"},"messages":{"items":{"properties":{"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content"},"refusal":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Refusal"},"role":{"type":"string","enum":["system","user","assistant"],"title":"Role"},"audio":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"data":{"type":"string","title":"Data"},"expires_at":{"type":"integer","title":"Expires At"},"transcript":{"type":"string","title":"Transcript"}},"additionalProperties":true,"type":"object","required":["id","data","expires_at","transcript"],"title":"ChatCompletionAudio"},{"type":"null"}]},"function_call":{"anyOf":[{"properties":{"arguments":{"type":"string","title":"Arguments"},"name":{"type":"string","title":"Name"}},"additionalProperties":true,"type":"object","required":["arguments","name"],"title":"FunctionCall"},{"type":"null"}]},"tool_calls":{"anyOf":[{"items":{"properties":{"id":{"type":"string","title":"Id"},"function":{"properties":{"arguments":{"type":"string","title":"Arguments"},"name":{"type":"string","title":"Name"}},"additionalProperties":true,"type":"object","required":["arguments","name"],"title":"Function"},"type":{"type":"string","const":"function","title":"Type"}},"additionalProperties":true,"type":"object","required":["id","function","type"],"title":"ChatCompletionMessageToolCall"},"type":"array"},{"type":"null"}],"title":"Tool Calls"}},"additionalProperties":true,"type":"object","required":["role"],"title":"Message"},"type":"array","title":"Messages"},"temperature":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Temperature","default":0.2},"top_p":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Top P","default":0.95},"max_tokens":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Tokens","default":2048},"stream":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Stream","default":false},"nilrag":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Nilrag","default":{}}},"type":"object","required":["model","messages"],"title":"ChatRequest"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"properties":{"detail":{"items":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"}}}}}}
>
  
</StatusCodes>


      